- title: subcommands
  subcommands:
    - title: open in Terminal
      command: open -a Terminal .

    - title: selection
      command: |
        echo [input]
      values:
        - one
        - two
        - three
      should_use_values_as_inline_commands: true

    - title: input
      command: |
        echo [input]

    - title: level 2
      subcommands:
        - title: level 3
          subcommands:
            - title: open in Sublime
              command: echo "st [[parent]]"

        - title: selection
          command: |
            echo [input]
          values:
            - one
            - two
            - three


        - title: bbb
          values_command: |
            git branch | grep -v '*' # all local branches minus the current one
          should_use_values_as_inline_commands: true
          subtitle: local
          #  icon: fork.png
          subcommands:
            - title: checkout
              command: |
                killall Xcode; git stash; git checkout "[parent]"; git pull;
              mods:
                - subtitle: Launch Xcode after
                  mod: cmd
                  command: killall Xcode; git stash; git checkout "[parent]"; git pull; xed .

                - subtitle: Launch Sublime after
                  mod: alt
                  command: killall Xcode; git stash; git checkout "[parent]"; git pull; st .

            - title: delete local branch
              command: |
                git branch -d "[parent]"
              mods:
                - subtitle: force delete
                  mod: cmd
                  command: |
                    git branch -D "[parent]"


            - title: copy branch name
              command: |
                echo "[parent]" | xargs echo -n | pbcopy




- title: selection
  command: |
    echo [input]
  values:
    - one
    - two
    - three
  should_use_values_as_inline_commands: true

- title: pull
  icon: down.big.png
  command: |
    git pull

- title: fetch
  icon: down.small.png
  command: |
    git fetch -p

- title: create
  icon: fork.plus.png
  command: |
    git checkout -b "[input_snake_case]"

- title: cherry-pick
  command: |
   git cherry-pick [input]

- title: commit
  command: |
   git commit -m "[input]"
  mods:
    - subtitle: and push
      mod: cmd
      command: |
        branch=$(git branch --show-current);
        git commit -m "[input]"
        git push -u origin $branch

- title: add all & commit
  command: |
    git add .
    git commit -m "[input]"
  mods:
    - subtitle: and push
      mod: cmd
      command: |
        branch=$(git branch --show-current);
        git add .
        git commit -m "[input]"
        git push -u origin $branch

- title: add modified & commit
  command: |
    git add -u
    git commit -m "[input]"
  mods:
    - subtitle: and push
      mod: cmd
      command: |
        branch=$(git branch --show-current);
        git add -u
        git commit -m "[input]"
        git push -u origin $branch

- title: open in Terminal
  command: |
    open -a Terminal .

- title: open in Xcode
  command: |
    xed .

- title: open in Sublime (st)
  command: |
    st .

- title: open in Finder
  command: |
    open .

- title: View in Alfred
  command: |
    [view in alfred]


- title: push
  icon: up.big.png
  command: |
    branch=$(git branch --show-current);
    git push -u origin $branch
  mods:
    - subtitle: force push
      mod: cmd
      command: |
        branch=$(git branch --show-current);
        git push -uf origin $branch


- title: selection
  command: |
    echo [input]
  values:
    - one
    - two
    - three


- title: find
  command: |
    st "[input]"
  values_command: |
    find . -type f


- title: current branch
  values_command: |
    git branch --show-current # just the current branch
  should_use_values_as_inline_commands: true
  subtitle: current # add support subtitle non commands
  subtitle_command: |
    echo 'current'
  icon: fork.png
  subcommands:
    - title: checkout
      command: |
        killall Xcode; git stash; git checkout "[parent]"; git pull;
      mods:
        - subtitle: Launch Xcode after
          mod: cmd
          command: killall Xcode; git stash; git checkout "[parent]"; git pull; xed .

        - subtitle: Launch Sublime after
          mod: alt
          command: killall Xcode; git stash; git checkout "[parent]"; git pull; st .

    - title: checkout master & delete this branch
      command: |
        master=$(git remote show origin | grep 'HEAD branch' | awk '{print $NF}')
        branch="[parent]"
        if [ "$branch" != "$master" ]; then
          killall Xcode; git stash; git checkout "$master"; git pull;
          git branch -D "[parent]"
        fi

    - title: copy branch name
      command: |
        echo "[parent]" | xargs echo -n | pbcopy


- title: local branches
  values_command: |
    git branch | grep -v '*' # all local branches minus the current one
  should_use_values_as_inline_commands: true
  subtitle: local
  icon: fork.png
  subcommands:
    - title: checkout
      command: |
        killall Xcode; git stash; git checkout "[parent]"; git pull;
      mods:
        - subtitle: Launch Xcode after
          mod: cmd
          command: killall Xcode; git stash; git checkout "[parent]"; git pull; xed .

        - subtitle: Launch Sublime after
          mod: alt
          command: killall Xcode; git stash; git checkout "[parent]"; git pull; st .

    - title: delete local branch
      command: |
        git branch -d "[parent]"
      mods:
        - subtitle: force delete
          mod: cmd
          command: |
            git branch -D "[parent]"


    - title: copy branch name
      command: |
        echo "[parent]" | xargs echo -n | pbcopy



- title: remote branches
  values_command: |
    git branch -r
  should_use_values_as_inline_commands: true
  icon: globe.png

  subcommands:
    - title: checkout
      command: |
        killall Xcode; git stash; git checkout -t "[parent]"; git pull;
      mods:
        - subtitle: Launch Xcode after
          mod: cmd
          command: killall Xcode; git stash; git checkout -t "[parent]"; git pull; xed .

        - subtitle: Launch Sublime after
          mod: alt
          command: killall Xcode; git stash; git checkout -t "[parent]"; git pull; st .

    - title: delete remote branch
      command: |
        branch="[parent]"
        git push origin --delete ${branch#origin/}


    - title: copy branch name
      command: |
        echo "[parent]" | xargs echo -n | pbcopy


- title: modified files
  command: echo [input]
  values_command: |
    git diff --name-only # git status --short


- title: copy diff for current branch
  command: |
    branch=$(git branch --show-current); 
    parent=$(git reflog show | grep 'checkout: moving from' | head -n 1 | awk '{print $(NF-2)}'); 
    git log --reverse --format=%B $(git merge-base $parent $branch)..$branch | pbcopy


- title: copy diff from tag
  command: |
    branch=$(git branch --show-current); 
    git log --reverse --format=%B $(git merge-base "[input]" $branch)..$branch | pbcopy
  values_command: git tag
  mods:
    - subtitle: copy for ChatGPT Summary
      mod: cmd
      command: |
        branch=$(git branch --show-current);
        {
          echo "this is a list of commits for my project. can you break it down into a change log, calling out things that are noteworthy"
          echo ''
          git log --reverse --format=%B $(git merge-base "[input]" $branch)..$branch)
        } | pbcopy"